{"ast":null,"code":"var _jsxFileName = \"/Users/evik/Documents/GitHub/frontend/src/ProjectDetails.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Auth from \"./AuthService\";\nimport SendNewMessage from \"./SendNewMessage\";\nexport default class ProjectDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.sendMessage = message => {\n      console.log(\"postMessage\", message);\n      Auth.fetch(\"/project/\".concat(this.props.project_id, \"/messages\"), {\n        method: \"POST\",\n        body: JSON.stringify(message)\n      }).then(response => {\n        return Auth.fetch(\"/professor-student-info\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            project_id: this.props.project_id,\n            message_id: response.id\n          })\n        });\n      }).then(response => {\n        return Auth.fetch(\"/messages/\".concat(response.message_id), {\n          method: \"GET\"\n        });\n      }).then(response => {\n        console.log(response);\n        this.setState({\n          messages: this.state.messages.concat(response)\n        });\n      }).catch(error => {\n        console.error(\"Server Error\", error);\n      });\n    };\n\n    this.getStudent = student_id => {\n      const student = this.state.students.filter(student => student.student_id == student_id)[0];\n      return student;\n    };\n\n    this.state = {\n      project: null,\n      students: [],\n      messages: []\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount\");\n    Auth.fetch(\"/projects/\".concat(this.props.project_id), {\n      method: \"GET\"\n    }).then(response => {\n      console.log(response);\n      this.setState(() => ({\n        project: response\n      }));\n    }).catch(error => {\n      console.error(\"Server Error\", error);\n    });\n    Auth.fetch(\"/projects/\".concat(this.props.project_id, \"/students\"), {\n      method: \"GET\"\n    }).then(response => {\n      console.log(response);\n      this.setState(() => ({\n        students: response\n      }));\n      return response;\n    }).catch(error => {\n      console.error(\"Server Error\", error);\n    });\n    Auth.fetch(\"/projects/\".concat(this.props.project_id, \"/messages\"), {\n      method: \"GET\"\n    }).then(response => {\n      this.setState(() => ({\n        messages: response\n      }));\n    }).catch(error => {\n      console.error(\"Server Error\", error);\n    });\n  }\n\n  render() {\n    const project = this.state.project;\n    if (project == null) return null;\n    return React.createElement(\"div\", {\n      className: \"second\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Project\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Project name \", project.project_name), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Students:\", \" \", this.state.students.map(student => React.createElement(\"div\", {\n      key: student.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, student.firstname, \" \", student.lastname))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Project deadline \", project.project_deadline), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Feedback dealine: \", project.feedback_deadline), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Recommendation deadline:\", \" \", project.recommendation_deadline), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.state.messages.map(message => React.createElement(MessageRow, {\n      key: message.id,\n      message: message,\n      student: this.getStudent(message.student_id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }))), React.createElement(Link, {\n      className: \"home-button\",\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Home\"), React.createElement(SendNewMessage, {\n      sendMessage: this.sendMessage,\n      students: this.state.students,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass MessageRow extends Component {\n  render() {\n    console.log(this.props);\n    const _this$props$message = this.props.message,\n          message = _this$props$message.message,\n          send_date = _this$props$message.send_date;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.props.student.firstname, \" \", this.props.student.lastname), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"em\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, message)), React.createElement(\"div\", {\n      className: \"Data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Data: \", React.createElement(\"em\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, send_date)));\n  }\n\n}","map":{"version":3,"sources":["/Users/evik/Documents/GitHub/frontend/src/ProjectDetails.js"],"names":["React","Component","Link","Auth","SendNewMessage","ProjectDetails","constructor","props","sendMessage","message","console","log","fetch","project_id","method","body","JSON","stringify","then","response","message_id","id","setState","messages","state","concat","catch","error","getStudent","student_id","student","students","filter","project","componentDidMount","render","project_name","map","firstname","lastname","project_deadline","feedback_deadline","recommendation_deadline","MessageRow","send_date"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Auth from \"./AuthService\";\nimport SendNewMessage from \"./SendNewMessage\";\n\nexport default class ProjectDetails extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            project: null,\n            students: [],\n            messages: []\n        };\n    }\n    componentDidMount() {\n        console.log(\"componentDidMount\");\n        Auth.fetch(`/projects/${this.props.project_id}`, {\n            method: \"GET\"\n        })\n            .then(response => {\n                console.log(response);\n                this.setState(() => ({ project: response }));\n            })\n            .catch(error => {\n                console.error(\"Server Error\", error);\n            });\n\n        Auth.fetch(`/projects/${this.props.project_id}/students`, {\n            method: \"GET\"\n        })\n            .then(response => {\n                console.log(response);\n                this.setState(() => ({ students: response }));\n                return response;\n            })\n            .catch(error => {\n                console.error(\"Server Error\", error);\n            });\n\n        Auth.fetch(`/projects/${this.props.project_id}/messages`, {\n            method: \"GET\"\n        })\n            .then(response => {\n                this.setState(() => ({ messages: response }));\n            })\n            .catch(error => {\n                console.error(\"Server Error\", error);\n            });\n    }\n\n    sendMessage = message => {\n        console.log(\"postMessage\", message);\n        Auth.fetch(`/project/${this.props.project_id}/messages`, {\n            method: \"POST\",\n            body: JSON.stringify(message)\n        })\n            .then(response => {\n                return Auth.fetch(`/professor-student-info`, {\n                    method: \"POST\",\n                    body: JSON.stringify({\n                        project_id: this.props.project_id,\n                        message_id: response.id\n                    })\n                });\n            })\n            .then(response => {\n                return Auth.fetch(`/messages/${response.message_id}`, {\n                    method: \"GET\"\n                });\n            })\n            .then(response => {\n                console.log(response);\n                this.setState({\n                    messages: this.state.messages.concat(response)\n                });\n            })\n            .catch(error => {\n                console.error(\"Server Error\", error);\n            });\n    };\n    getStudent = student_id => {\n        const student = this.state.students.filter(\n            student => student.student_id == student_id\n        )[0];\n        return student;\n    };\n    render() {\n        const project = this.state.project;\n        if (project == null) return null;\n        return (\n            <div className=\"second\">\n                <div className=\"Project\">\n                    <h3>Project name {project.project_name}</h3>\n                    <p>\n                        Students:{\" \"}\n                        {this.state.students.map(student => (\n                            <div key={student.id}>\n                                {student.firstname} {student.lastname}\n                            </div>\n                        ))}\n                    </p>\n                    <p>Project deadline {project.project_deadline}</p>\n                    <p>Feedback dealine: {project.feedback_deadline}</p>\n                    <p>\n                        Recommendation deadline:{\" \"}\n                        {project.recommendation_deadline}\n                    </p>\n                    <p>\n                        {this.state.messages.map(message => (\n                            <MessageRow\n                                key={message.id}\n                                message={message}\n                                student={this.getStudent(message.student_id)}\n                            />\n                        ))}\n                    </p>\n                    <Link className=\"home-button\" to=\"/\">\n                        Home\n                    </Link>\n                    <SendNewMessage\n                        sendMessage={this.sendMessage}\n                        students={this.state.students}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nclass MessageRow extends Component {\n    render() {\n        console.log(this.props);\n        const { message, send_date } = this.props.message;\n        return (\n            <div>\n                <div>\n                    {this.props.student.firstname} {this.props.student.lastname}\n                </div>\n                <div>\n                    <em>{message}</em>\n                </div>\n                <div className=\"Data\">\n                    Data: <em>{send_date}</em>\n                </div>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}